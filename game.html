<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë°”ì´ë¯¼ì˜ ì»¤ìŠ¤í…€ ìˆ ê²Œì„</title>
    <style>
        /* 1. ê¸°ë³¸ ë°°ê²½ */
        body {
            background-color: #222; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            font-family: 'Malgun Gothic', sans-serif;
        }

        /* 2. ê²Œì„ê¸° ì „ì²´ ì»¨í…Œì´ë„ˆ */
        .game-container {
            position: relative;
            width: 500px;
            height: 600px;
        }

        /* 3. ê¸°ê³„ ëª¸í†µ (ì¤‘ê°„ ë ˆì´ì–´) */
        .machine-body {
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2; 
            pointer-events: none;
        }

        /* 4. ê¸€ìê°€ ì¶œë ¥ë˜ëŠ” í™”ë©´ (ë§¨ ìœ„ ë ˆì´ì–´) */
        .screen-area {
            position: absolute;
            top: 50px;  
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            height: 100px; 
            z-index: 3; 
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .screen-text {
            font-size: 45px;
            font-weight: bold;
            color: #333;
            text-align: center;
            white-space: nowrap;
            transition: transform 0.2s; 
        }

        /* 5. í•¸ë“¤ ë§‰ëŒ€ (ë§¨ ì•„ë˜ ë ˆì´ì–´ - ê¸°ê³„ ë’¤ìª½) */
        .handle-stick {
            position: absolute;
            right: -110px; 
            top: 130px;    
            width: 150px; /* ëŒ€ì™• ì‚¬ì´ì¦ˆ */
            transform-origin: bottom center;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 1; 
        }

        .handle-stick.pulled {
            transform: rotate(45deg); 
        }

        /* 6. ê²Œì„ ì‹œì‘ ì „ ì„¤ì • í™”ë©´ */
        .setup-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }

        .setup-box {
            background-color: #333;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            width: 400px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        textarea {
            width: 100%;
            height: 150px;
            margin: 15px 0;
            padding: 10px;
            font-size: 16px;
            border-radius: 10px;
            border: none;
            resize: none;
        }

        button {
            background-color: #ffcc00;
            color: black;
            font-size: 20px;
            font-weight: bold;
            padding: 10px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="setupScreen" class="setup-overlay">
        <div class="setup-box">
            <h2>ğŸ· ì˜¤ëŠ˜ì˜ ìˆ ê²Œì„ ë©”ë‰´ ğŸº</h2>
            <p>ë²Œì¹™ì„ <strong>ì‰¼í‘œ(,)</strong>ë¡œ êµ¬ë¶„í•´ì„œ ì ì–´ì£¼ì„¸ìš”!</p>
            <textarea id="inputList">ì›ìƒ·, ë°˜ìƒ·, í‘ê¸°ì‚¬, ëœë¤ê²Œì„, í­íƒ„ì£¼, ì˜†ì‚¬ëŒ ëŸ¬ë¸Œìƒ·, ë¬¼ í•œì”, 3ì²œì› ì ë¦½, ì•ˆì£¼ ë¨¹ê¸°</textarea>
            <button onclick="saveAndStart()">ê²Œì„ ì‹œì‘í•˜ê¸°!</button>
        </div>
    </div>

    <div class="game-container">
        <img src="body.png" class="machine-body" alt="ê¸°ê³„ ë³¸ì²´">
        <div class="screen-area">
            <div class="screen-text" id="displayBox">Ready</div>
        </div>
        <img src="handle_stick.png" class="handle-stick" id="handle" alt="í•¸ë“¤">
    </div>

    <audio id="leverSound" src="lever.mp3"></audio>
    <audio id="resultSound" src="result.mp3"></audio>

    <script>
        const handle = document.getElementById('handle');
        const displayBox = document.getElementById('displayBox');
        const leverSound = document.getElementById('leverSound');
        const resultSound = document.getElementById('resultSound');
        
        let games = []; 
        let isSpinning = false;

        // ì„¤ì • ì €ì¥ ë° ì‹œì‘
        function saveAndStart() {
            const input = document.getElementById('inputList').value;
            games = input.split(',').map(item => item.trim()).filter(item => item !== '');
            if (games.length === 0) {
                alert("ë²Œì¹™ì„ í•œ ê°œ ì´ìƒ ì ì–´ì£¼ì„¸ìš”!");
                return;
            }
            document.getElementById('setupScreen').style.display = 'none';
        }

        // ìŠ¤í˜ì´ìŠ¤ë°” ì¡°ì‘
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('setupScreen').style.display === 'none') {
                if (e.code === 'Space' && !isSpinning) {
                    startRoulette();
                }
            }
        });

        // ë£°ë › ì‹¤í–‰ ë¡œì§
        function startRoulette() {
            isSpinning = true; 
            
            // ë ˆë²„ íš¨ê³¼
            handle.classList.add('pulled');
            leverSound.currentTime = 0;
            leverSound.play().catch(e => {});

            setTimeout(() => {
                handle.classList.remove('pulled');
            }, 500);

            // ë£°ë › íšŒì „ (50ms ë§ˆë‹¤ ë³€ê²½)
            const spinInterval = setInterval(() => {
                const randomIdx = Math.floor(Math.random() * games.length);
                displayBox.innerText = games[randomIdx];
                displayBox.style.color = Math.random() > 0.5 ? "#ff0000" : "#0000ff";
            }, 50);

            // 3ì´ˆ í›„ ì •ì§€
            setTimeout(() => {
                clearInterval(spinInterval);
                const finalPick = games[Math.floor(Math.random() * games.length)];
                displayBox.innerText = finalPick;
                
                displayBox.style.color = "#000000"; 
                displayBox.style.transform = "scale(1.3)"; 
                setTimeout(() => displayBox.style.transform = "scale(1.0)", 300);

                leverSound.pause();
                resultSound.currentTime = 0;
                resultSound.play().catch(e => {});

                isSpinning = false; 
            }, 3000); 
        }
    </script>
</body>
</html>